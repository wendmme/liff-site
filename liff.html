<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>サイト診断 LIFF</title>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
<p>診断フォームへリダイレクト中…</p>
<script>
liff.init({ liffId: '2007865582-nJ0DMwPM' })  // ← “https://” を付けない！
.then(() => {
  const uid = liff.getContext().userId || 'unknown';
  const params = new URLSearchParams(location.search);
  const t = params.get('type') || 'post';     // ?type=pre などで切替
  const url =
    'https://docs.google.com/forms/d/e/1FAIpQLScGeCK-wnDDnM3EJ1KSlbWgr-zrdiVuasGMjRvjl1kSAuXT5w/viewform'
      + '?entry.357089518=' + uid              // ← UID の entry 番号
      + '&entry.1964922167=' + t;              // ← type の entry 番号
  location.href = url;
});
</script>
</body>
</html>